{"version":3,"sources":["../../../src/components/View/utils.ts"],"sourcesContent":["import { getOverflowAncestors } from '../../lib/floating';\nimport { TouchEvent } from '../Touch/Touch';\n\nconst swipeBackExcludedSelector = 'input, textarea, [data-vkui-swipe-back=false]';\n\nexport function swipeBackExcluded(e: TouchEvent) {\n  const target = e.originalEvent.target as HTMLElement;\n  // eslint-disable-next-line no-restricted-properties\n  return Boolean(target?.closest?.(swipeBackExcludedSelector));\n}\n\nexport function hasHorizontalScrollableElementWithScrolledToLeft(node: HTMLElement) {\n  return getOverflowAncestors(node).some((node) =>\n    'scrollLeft' in node ? node.scrollLeft > 0 : false,\n  );\n}\n\nexport const SWIPE_BACK_EDGE_SIZE_THRESHOLD = 20;\n\nexport const SWIPE_BACK_SHIFT_THRESHOLD = 10;\n\nexport const getSwipeBackPredicates = (startX: number, shiftX: number, innerWidth: number) => {\n  const swipedToOpposite = shiftX < 0;\n  const swipeBackTriggered = shiftX >= SWIPE_BACK_SHIFT_THRESHOLD;\n  const viewportStartEdgeTouched = startX <= SWIPE_BACK_EDGE_SIZE_THRESHOLD;\n  const viewportEndEdgeTouched = startX >= innerWidth - SWIPE_BACK_EDGE_SIZE_THRESHOLD;\n  return { swipedToOpposite, swipeBackTriggered, viewportStartEdgeTouched, viewportEndEdgeTouched };\n};\n"],"names":["getOverflowAncestors","swipeBackExcludedSelector","swipeBackExcluded","e","target","originalEvent","Boolean","closest","hasHorizontalScrollableElementWithScrolledToLeft","node","some","scrollLeft","SWIPE_BACK_EDGE_SIZE_THRESHOLD","SWIPE_BACK_SHIFT_THRESHOLD","getSwipeBackPredicates","startX","shiftX","innerWidth","swipedToOpposite","swipeBackTriggered","viewportStartEdgeTouched","viewportEndEdgeTouched"],"mappings":"AAAA,SAASA,oBAAoB,QAAQ,qBAAqB;AAG1D,IAAMC,4BAA4B;AAElC,OAAO,SAASC,kBAAkBC,CAAa;QAG9BC;IAFf,IAAMA,SAASD,EAAEE,aAAa,CAACD,MAAM;IACrC,oDAAoD;IACpD,OAAOE,QAAQF,mBAAAA,8BAAAA,kBAAAA,OAAQG,OAAO,cAAfH,sCAAAA,qBAAAA,QAAkBH;AACnC;AAEA,OAAO,SAASO,iDAAiDC,IAAiB;IAChF,OAAOT,qBAAqBS,MAAMC,IAAI,CAAC,SAACD;eACtC,gBAAgBA,OAAOA,KAAKE,UAAU,GAAG,IAAI;;AAEjD;AAEA,OAAO,IAAMC,iCAAiC,GAAG;AAEjD,OAAO,IAAMC,6BAA6B,GAAG;AAE7C,OAAO,IAAMC,yBAAyB,SAACC,QAAgBC,QAAgBC;IACrE,IAAMC,mBAAmBF,SAAS;IAClC,IAAMG,qBAAqBH,UAAUH;IACrC,IAAMO,2BAA2BL,UAAUH;IAC3C,IAAMS,yBAAyBN,UAAUE,aAAaL;IACtD,OAAO;QAAEM,kBAAAA;QAAkBC,oBAAAA;QAAoBC,0BAAAA;QAA0BC,wBAAAA;IAAuB;AAClG,EAAE"}