{"version":3,"sources":["../../../src/lib/accessibility.ts"],"sourcesContent":["import * as React from 'react';\n\nexport const FOCUSABLE_ELEMENTS_LIST = [\n  'a[href]',\n  'area[href]',\n  'input:not([disabled]):not([hidden]):not([type=\"hidden\"]):not([aria-hidden])',\n  'select:not([disabled]):not([hidden]):not([aria-hidden])',\n  'textarea:not([disabled])',\n  'button:not([disabled])',\n  'iframe',\n  'audio',\n  'video',\n  '[contenteditable]',\n  '[tabindex]:not([tabindex=\"-1\"])',\n];\n\nexport enum Keys {\n  ENTER = 'Enter',\n  SPACE = 'Space',\n  TAB = 'Tab',\n  ESCAPE = 'Escape',\n  HOME = 'Home',\n  END = 'End',\n  ARROW_LEFT = 'ArrowLeft',\n  ARROW_RIGHT = 'ArrowRight',\n  ARROW_UP = 'ArrowUp',\n  ARROW_DOWN = 'ArrowDown',\n  PAGE_UP = 'PageUp',\n  PAGE_DOWN = 'PageDown',\n}\n\ninterface AccessibleKey {\n  code: Keys;\n  key: string[];\n  keyCode: number;\n}\n\nconst ACCESSIBLE_KEYS: AccessibleKey[] = [\n  {\n    code: Keys.ENTER,\n    key: ['Enter'],\n    keyCode: 13,\n  },\n  {\n    code: Keys.SPACE,\n    key: ['Space', 'Spacebar', ' '],\n    keyCode: 32,\n  },\n  {\n    code: Keys.TAB,\n    key: ['Tab'],\n    keyCode: 9,\n  },\n  {\n    code: Keys.ESCAPE,\n    key: ['Escape'],\n    keyCode: 27,\n  },\n  {\n    code: Keys.HOME,\n    key: ['Home'],\n    keyCode: 36,\n  },\n  {\n    code: Keys.END,\n    key: ['End'],\n    keyCode: 35,\n  },\n  {\n    code: Keys.ARROW_LEFT,\n    key: ['ArrowLeft'],\n    keyCode: 37,\n  },\n  {\n    code: Keys.ARROW_RIGHT,\n    key: ['ArrowRight'],\n    keyCode: 39,\n  },\n  {\n    code: Keys.ARROW_UP,\n    key: ['ArrowUp'],\n    keyCode: 40,\n  },\n  {\n    code: Keys.ARROW_DOWN,\n    key: ['ArrowDown'],\n    keyCode: 40,\n  },\n  {\n    code: Keys.PAGE_UP,\n    key: ['PageUp'],\n    keyCode: 40,\n  },\n  {\n    code: Keys.PAGE_DOWN,\n    key: ['PageDown'],\n    keyCode: 40,\n  },\n];\n\nexport function pressedKey(e: KeyboardEvent | React.KeyboardEvent<HTMLElement>) {\n  return (\n    ACCESSIBLE_KEYS.find(({ key, keyCode }) => key.includes(e.key) || keyCode === e.keyCode)\n      ?.code || null\n  );\n}\n\nexport function shouldTriggerClickOnEnterOrSpace(\n  e: KeyboardEvent | React.KeyboardEvent<HTMLElement>,\n) {\n  const el = e.target as HTMLElement;\n  const { tagName } = el;\n\n  const role = el.getAttribute('role');\n\n  const isValidKeyboardEventTarget: boolean =\n    el.isContentEditable !== true &&\n    tagName !== 'INPUT' &&\n    tagName !== 'TEXTAREA' &&\n    (role === 'button' || role === 'link');\n\n  const isNativeAnchorEl = tagName === 'A' && el.hasAttribute('href');\n  const keyPressed = pressedKey(e);\n\n  return (\n    isValidKeyboardEventTarget &&\n    // trigger buttons on Space\n    ((keyPressed === Keys.SPACE && role === 'button') ||\n      // trigger non-native links and buttons on Enter\n      (keyPressed === Keys.ENTER && !isNativeAnchorEl))\n  );\n}\n"],"names":["React","FOCUSABLE_ELEMENTS_LIST","Keys","ACCESSIBLE_KEYS","code","key","keyCode","pressedKey","e","find","includes","shouldTriggerClickOnEnterOrSpace","el","target","tagName","role","getAttribute","isValidKeyboardEventTarget","isContentEditable","isNativeAnchorEl","hasAttribute","keyPressed"],"mappings":"AAAA,YAAYA,WAAW,QAAQ;AAE/B,OAAO,MAAMC,0BAA0B;IACrC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD,CAAC;;UAEUC;;;;;;;;;;;;;GAAAA,SAAAA;AAqBZ,MAAMC,kBAAmC;IACvC;QACEC,IAAI;QACJC,KAAK;YAAC;SAAQ;QACdC,SAAS;IACX;IACA;QACEF,IAAI;QACJC,KAAK;YAAC;YAAS;YAAY;SAAI;QAC/BC,SAAS;IACX;IACA;QACEF,IAAI;QACJC,KAAK;YAAC;SAAM;QACZC,SAAS;IACX;IACA;QACEF,IAAI;QACJC,KAAK;YAAC;SAAS;QACfC,SAAS;IACX;IACA;QACEF,IAAI;QACJC,KAAK;YAAC;SAAO;QACbC,SAAS;IACX;IACA;QACEF,IAAI;QACJC,KAAK;YAAC;SAAM;QACZC,SAAS;IACX;IACA;QACEF,IAAI;QACJC,KAAK;YAAC;SAAY;QAClBC,SAAS;IACX;IACA;QACEF,IAAI;QACJC,KAAK;YAAC;SAAa;QACnBC,SAAS;IACX;IACA;QACEF,IAAI;QACJC,KAAK;YAAC;SAAU;QAChBC,SAAS;IACX;IACA;QACEF,IAAI;QACJC,KAAK;YAAC;SAAY;QAClBC,SAAS;IACX;IACA;QACEF,IAAI;QACJC,KAAK;YAAC;SAAS;QACfC,SAAS;IACX;IACA;QACEF,IAAI;QACJC,KAAK;YAAC;SAAW;QACjBC,SAAS;IACX;CACD;AAED,OAAO,SAASC,WAAWC,CAAmD;IAC5E,OACEL,gBAAgBM,IAAI,CAAC,CAAC,EAAEJ,GAAG,EAAEC,OAAO,EAAE,GAAKD,IAAIK,QAAQ,CAACF,EAAEH,GAAG,KAAKC,YAAYE,EAAEF,OAAO,GACnFF,QAAQ;AAEhB;AAEA,OAAO,SAASO,iCACdH,CAAmD;IAEnD,MAAMI,KAAKJ,EAAEK,MAAM;IACnB,MAAM,EAAEC,OAAO,EAAE,GAAGF;IAEpB,MAAMG,OAAOH,GAAGI,YAAY,CAAC;IAE7B,MAAMC,6BACJL,GAAGM,iBAAiB,KAAK,QACzBJ,YAAY,WACZA,YAAY,cACXC,CAAAA,SAAS,YAAYA,SAAS,MAAK;IAEtC,MAAMI,mBAAmBL,YAAY,OAAOF,GAAGQ,YAAY,CAAC;IAC5D,MAAMC,aAAad,WAAWC;IAE9B,OACES,8BACA,2BAA2B;IAC1B,CAAA,AAACI,0BAA6BN,SAAS,YACtC,gDAAgD;IAC/CM,0BAA6B,CAACF,gBAAgB;AAErD"}