{"version":3,"sources":["../../../../src/components/WriteBarIcon/WriteBarIcon.tsx"],"sourcesContent":["import * as React from 'react';\nimport {\n  Icon24Attach,\n  Icon24CheckCircleOutline,\n  Icon24Send,\n  Icon28AddCircleOutline,\n  Icon28AttachOutline,\n  Icon28CheckCircleOutline,\n  Icon28Send,\n  Icon48WritebarDone,\n  Icon48WritebarSend,\n} from '@vkontakte/icons';\nimport { classNames, hasReactNode } from '@vkontakte/vkjs';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { Platform } from '../../lib/platform';\nimport { COMMON_WARNINGS, warnOnce } from '../../lib/warnOnce';\nimport { AdaptiveIconRenderer } from '../AdaptiveIconRenderer/AdaptiveIconRenderer';\nimport { Counter } from '../Counter/Counter';\nimport { Tappable } from '../Tappable/Tappable';\nimport styles from './WriteBarIcon.module.css';\n\nexport interface WriteBarIconProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  /**\n   * Предустановленные типы кнопок в WriteBar для отрисовки иконки в зависимости от платформы.\n   * Если передать валидное значение для этого свойства, `children` игнорируется.\n   *\n   * - `attach` – иконка прикрепления.\n   * - `send` – иконка отправки.\n   * - `done` – иконка отправки в режиме редактирования.\n   */\n  mode?: 'attach' | 'send' | 'done';\n  /**\n   * Значение счётчика для кнопки. Например, для количества прикреплённых файлов.\n   */\n  count?: number;\n}\n\nconst warn = warnOnce('WriteBarIcon');\n\n/**\n * @see https://vkcom.github.io/VKUI/#/WriteBarIcon\n */\nexport const WriteBarIcon = ({\n  mode,\n  children,\n  count,\n  className,\n  ...restProps\n}: WriteBarIconProps) => {\n  const platform = usePlatform();\n  let modeLabel: string | undefined = undefined;\n\n  let predefinedIcons;\n  switch (mode) {\n    case 'attach':\n      predefinedIcons = {\n        IconCompact: platform === Platform.IOS ? Icon28AddCircleOutline : Icon24Attach,\n        IconRegular: platform === Platform.IOS ? Icon28AddCircleOutline : Icon28AttachOutline,\n      };\n      modeLabel = 'Прикрепить файл';\n      break;\n\n    case 'send':\n      predefinedIcons = {\n        IconCompact: platform === Platform.IOS ? Icon48WritebarSend : Icon24Send,\n        IconRegular: platform === Platform.IOS ? Icon48WritebarSend : Icon28Send,\n      };\n      modeLabel = 'Отправить';\n      break;\n\n    case 'done':\n      predefinedIcons = {\n        IconCompact: platform === Platform.IOS ? Icon48WritebarDone : Icon24CheckCircleOutline,\n        IconRegular: platform === Platform.IOS ? Icon48WritebarDone : Icon28CheckCircleOutline,\n      };\n      modeLabel = 'Готово';\n      break;\n\n    default:\n      break;\n  }\n\n  if (process.env.NODE_ENV === 'development') {\n    const isAccessible = modeLabel || restProps['aria-label'] || restProps['aria-labelledby'];\n\n    if (!isAccessible) {\n      warn(COMMON_WARNINGS.a11y['button-name'], 'error');\n    }\n  }\n\n  return (\n    <Tappable\n      aria-label={modeLabel}\n      {...restProps}\n      Component=\"button\"\n      hasHover={false}\n      activeMode={styles['WriteBarIcon__active']}\n      className={classNames(\n        styles['WriteBarIcon'],\n        platform === Platform.IOS && styles['WriteBarIcon--ios'],\n        mode === 'send' && styles['WriteBarIcon--mode-send'],\n        mode === 'done' && styles['WriteBarIcon--mode-done'],\n        className,\n      )}\n    >\n      <span className={styles['WriteBarIcon__in']}>\n        {predefinedIcons ? <AdaptiveIconRenderer {...predefinedIcons} /> : children}\n      </span>\n      {hasReactNode(count) && (\n        <Counter className={styles['WriteBarIcon__counter']} size=\"s\">\n          {count}\n        </Counter>\n      )}\n    </Tappable>\n  );\n};\n"],"names":["React","Icon24Attach","Icon24CheckCircleOutline","Icon24Send","Icon28AddCircleOutline","Icon28AttachOutline","Icon28CheckCircleOutline","Icon28Send","Icon48WritebarDone","Icon48WritebarSend","classNames","hasReactNode","usePlatform","Platform","COMMON_WARNINGS","warnOnce","AdaptiveIconRenderer","Counter","Tappable","styles","warn","WriteBarIcon","mode","children","count","className","restProps","platform","modeLabel","undefined","predefinedIcons","IconCompact","IOS","IconRegular","process","env","NODE_ENV","isAccessible","a11y","aria-label","Component","hasHover","activeMode","span","size"],"mappings":"AAAA,YAAYA,WAAW,QAAQ;AAC/B,SACEC,YAAY,EACZC,wBAAwB,EACxBC,UAAU,EACVC,sBAAsB,EACtBC,mBAAmB,EACnBC,wBAAwB,EACxBC,UAAU,EACVC,kBAAkB,EAClBC,kBAAkB,QACb,mBAAmB;AAC1B,SAASC,UAAU,EAAEC,YAAY,QAAQ,kBAAkB;AAC3D,SAASC,WAAW,QAAQ,0BAA0B;AACtD,SAASC,QAAQ,QAAQ,qBAAqB;AAC9C,SAASC,eAAe,EAAEC,QAAQ,QAAQ,qBAAqB;AAC/D,SAASC,oBAAoB,QAAQ,+CAA+C;AACpF,SAASC,OAAO,QAAQ,qBAAqB;AAC7C,SAASC,QAAQ,QAAQ,uBAAuB;AAChD,OAAOC,YAAY,4BAA4B;AAkB/C,MAAMC,OAAOL,SAAS;AAEtB;;CAEC,GACD,OAAO,MAAMM,eAAe,CAAC,EAC3BC,IAAI,EACJC,QAAQ,EACRC,KAAK,EACLC,SAAS,EACT,GAAGC,WACe;IAClB,MAAMC,WAAWf;IACjB,IAAIgB,YAAgCC;IAEpC,IAAIC;IACJ,OAAQR;QACN,KAAK;YACHQ,kBAAkB;gBAChBC,aAAaJ,aAAad,SAASmB,GAAG,GAAG5B,yBAAyBH;gBAClEgC,aAAaN,aAAad,SAASmB,GAAG,GAAG5B,yBAAyBC;YACpE;YACAuB,YAAY;YACZ;QAEF,KAAK;YACHE,kBAAkB;gBAChBC,aAAaJ,aAAad,SAASmB,GAAG,GAAGvB,qBAAqBN;gBAC9D8B,aAAaN,aAAad,SAASmB,GAAG,GAAGvB,qBAAqBF;YAChE;YACAqB,YAAY;YACZ;QAEF,KAAK;YACHE,kBAAkB;gBAChBC,aAAaJ,aAAad,SAASmB,GAAG,GAAGxB,qBAAqBN;gBAC9D+B,aAAaN,aAAad,SAASmB,GAAG,GAAGxB,qBAAqBF;YAChE;YACAsB,YAAY;YACZ;QAEF;YACE;IACJ;IAEA,IAAIM,QAAQC,GAAG,CAACC,QAAQ,KAAK,eAAe;QAC1C,MAAMC,eAAeT,aAAaF,SAAS,CAAC,aAAa,IAAIA,SAAS,CAAC,kBAAkB;QAEzF,IAAI,CAACW,cAAc;YACjBjB,KAAKN,gBAAgBwB,IAAI,CAAC,cAAc,EAAE;QAC5C;IACF;IAEA,qBACE,oBAACpB;QACCqB,cAAYX;QACX,GAAGF,SAAS;QACbc,WAAU;QACVC,UAAU;QACVC,YAAYvB,MAAM,CAAC,uBAAuB;QAC1CM,WAAWf,WACTS,MAAM,CAAC,eAAe,EACtBQ,aAAad,SAASmB,GAAG,IAAIb,MAAM,CAAC,oBAAoB,EACxDG,SAAS,UAAUH,MAAM,CAAC,0BAA0B,EACpDG,SAAS,UAAUH,MAAM,CAAC,0BAA0B,EACpDM;qBAGF,oBAACkB;QAAKlB,WAAWN,MAAM,CAAC,mBAAmB;OACxCW,gCAAkB,oBAACd,sBAAyBc,mBAAsBP,WAEpEZ,aAAaa,wBACZ,oBAACP;QAAQQ,WAAWN,MAAM,CAAC,wBAAwB;QAAEyB,MAAK;OACvDpB;AAKX,EAAE"}