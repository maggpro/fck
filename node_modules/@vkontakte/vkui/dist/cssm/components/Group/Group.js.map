{"version":3,"sources":["../../../../src/components/Group/Group.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames, hasReactNode } from '@vkontakte/vkjs';\nimport { useAdaptivity } from '../../hooks/useAdaptivity';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { SizeType } from '../../lib/adaptivity';\nimport { Platform } from '../../lib/platform';\nimport { warnOnce } from '../../lib/warnOnce';\nimport { HTMLAttributesWithRootRef } from '../../types';\nimport { AppRootContext } from '../AppRoot/AppRootContext';\nimport { ModalRootContext } from '../ModalRoot/ModalRootContext';\nimport { RootComponent } from '../RootComponent/RootComponent';\nimport { Separator } from '../Separator/Separator';\nimport { Spacing } from '../Spacing/Spacing';\nimport { Footnote } from '../Typography/Footnote/Footnote';\nimport styles from './Group.module.css';\n\nconst sizeXClassNames = {\n  none: classNames(styles['Group--sizeX-none'], 'vkuiInternalGroup--sizeX-none'),\n  [SizeType.COMPACT]: styles['Group--sizeX-compact'],\n};\n\nconst stylesMode = {\n  none: classNames(styles['Group--mode-none'], 'vkuiInternalGroup--mode-none'),\n  plain: classNames(styles['Group--mode-plain'], 'vkuiInternalGroup--mode-plain'),\n  card: classNames(styles['Group--mode-card'], 'vkuiInternalGroup--mode-card'),\n};\n\nconst stylesPadding = {\n  s: styles['Group--padding-s'],\n  m: styles['Group--padding-m'],\n};\n\n/**\n * Вычисляем mode для Group.\n */\nfunction useGroupMode(\n  forcedMode: GroupProps['mode'],\n  sizeX: SizeType | 'none',\n  isInsideModal: boolean,\n): 'plain' | 'card' | 'none' {\n  const { layout } = React.useContext(AppRootContext);\n\n  if (forcedMode) {\n    return forcedMode;\n  }\n\n  if (isInsideModal) {\n    return 'plain';\n  }\n\n  if (layout) {\n    return layout;\n  }\n\n  if (sizeX !== 'none') {\n    return sizeX === SizeType.REGULAR ? 'card' : 'plain';\n  }\n\n  return 'none';\n}\n\nexport interface GroupProps extends HTMLAttributesWithRootRef<HTMLElement> {\n  header?: React.ReactNode;\n  description?: React.ReactNode;\n  /**\n    `show` - разделитель всегда показывается,\n    `hide` - разделитель всегда спрятан,\n    `auto` - разделитель рисуется автоматически между соседними группами.\n   */\n  separator?: 'show' | 'hide' | 'auto';\n  /**\n   * Режим отображения. Если установлен `card`, выглядит как карточка c\n   * обводкой и внешними отступами. Если `plain` — без отступов и обводки.\n   * По умолчанию режим отображения зависит от `sizeX` (`mode=card` при `sizeX=REGULAR` и `mode=plain` при `sizeX=COMPACT`)\n   * В модальных окнах по умолчанию `plain`.\n   */\n  mode?: 'plain' | 'card';\n  /**\n   * Отвечает за отступы вокруг контента в режиме `card`.\n   */\n  padding?: 's' | 'm';\n}\n\nconst warn = warnOnce('Group');\n/**\n * @see https://vkcom.github.io/VKUI/#/Group\n */\nexport const Group = ({\n  header,\n  description,\n  children,\n  separator = 'auto',\n  mode: modeProps,\n  padding = 'm',\n  tabIndex: tabIndexProp,\n  ...restProps\n}: GroupProps) => {\n  const { isInsideModal } = React.useContext(ModalRootContext);\n  const platform = usePlatform();\n  const { sizeX = 'none' } = useAdaptivity();\n\n  const mode = useGroupMode(modeProps, sizeX, isInsideModal);\n\n  const isTabPanel = restProps.role === 'tabpanel';\n\n  if (\n    process.env.NODE_ENV === 'development' &&\n    isTabPanel &&\n    (!restProps['aria-controls'] || !restProps['id'])\n  ) {\n    warn(\n      'При использовании роли \"tabpanel\" необходимо задать значение свойств \"aria-controls\" и \"id\"',\n    );\n  }\n\n  const tabIndex = isTabPanel && tabIndexProp === undefined ? 0 : tabIndexProp;\n\n  return (\n    <>\n      <RootComponent\n        Component=\"section\"\n        {...restProps}\n        tabIndex={tabIndex}\n        baseClassName={classNames(\n          'vkuiInternalGroup',\n          styles['Group'],\n          isInsideModal && styles['Group--inside-modal'],\n          platform === Platform.IOS && styles['Group--ios'],\n          sizeX !== SizeType.REGULAR && sizeXClassNames[sizeX],\n          mode && stylesMode[mode],\n          stylesPadding[padding],\n        )}\n      >\n        {hasReactNode(header) && <div className={styles['Group__header']}>{header}</div>}\n        {children}\n        {hasReactNode(description) && (\n          <Footnote className={styles['Group__description']}>{description}</Footnote>\n        )}\n      </RootComponent>\n\n      {separator !== 'hide' && (\n        <React.Fragment>\n          <Spacing\n            className={classNames(styles['Group__separator'], styles['Group__separator--spacing'])}\n            size={16}\n          />\n          <Separator\n            className={classNames(\n              styles['Group__separator'],\n              styles['Group__separator--separator'],\n              separator === 'show' && styles['Group__separator--force'],\n            )}\n          />\n        </React.Fragment>\n      )}\n    </>\n  );\n};\n"],"names":["React","classNames","hasReactNode","useAdaptivity","usePlatform","SizeType","Platform","warnOnce","AppRootContext","ModalRootContext","RootComponent","Separator","Spacing","Footnote","styles","sizeXClassNames","none","COMPACT","stylesMode","plain","card","stylesPadding","s","m","useGroupMode","forcedMode","sizeX","isInsideModal","layout","useContext","REGULAR","warn","Group","header","description","children","separator","mode","modeProps","padding","tabIndex","tabIndexProp","restProps","platform","isTabPanel","role","process","env","NODE_ENV","undefined","Component","baseClassName","IOS","div","className","Fragment","size"],"mappings":"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"}