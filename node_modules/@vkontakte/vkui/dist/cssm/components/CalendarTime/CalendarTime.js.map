{"version":3,"sources":["../../../../src/components/CalendarTime/CalendarTime.tsx"],"sourcesContent":["import * as React from 'react';\nimport { SizeType } from '../../lib/adaptivity';\nimport { setHours, setMinutes } from '../../lib/date';\nimport { AdaptivityProvider } from '../AdaptivityProvider/AdaptivityProvider';\nimport { Button } from '../Button/Button';\nimport { CustomSelect } from '../CustomSelect/CustomSelect';\nimport styles from './CalendarTime.module.css';\n\nexport interface CalendarTimeProps {\n  value: Date;\n  doneButtonText?: string;\n  changeHoursAriaLabel?: string;\n  changeMinutesAriaLabel?: string;\n  onChange?(value: Date): void;\n  onClose?(): void;\n  isDayDisabled?(day: Date, withTime?: boolean): boolean;\n}\n\nconst hours: Array<{\n  value: number;\n  label: string;\n}> = [];\nfor (let i = 0; i < 24; i += 1) {\n  hours.push({ value: i, label: String(i).padStart(2, '0') });\n}\n\nconst minutes: Array<{\n  value: number;\n  label: string;\n}> = [];\nfor (let i = 0; i < 60; i += 1) {\n  minutes.push({ value: i, label: String(i).padStart(2, '0') });\n}\n\nexport const CalendarTime = ({\n  value,\n  doneButtonText = 'Готово',\n  onChange,\n  onClose,\n  changeHoursAriaLabel = 'Изменить час',\n  changeMinutesAriaLabel = 'Изменить минуту',\n  isDayDisabled,\n}: CalendarTimeProps) => {\n  const localHours = isDayDisabled\n    ? hours.map((hour) => {\n        return { ...hour, disabled: isDayDisabled(setHours(value, hour.value), true) };\n      })\n    : hours;\n\n  const localMinutes = isDayDisabled\n    ? minutes.map((minute) => {\n        return { ...minute, disabled: isDayDisabled(setMinutes(value, minute.value), true) };\n      })\n    : minutes;\n\n  const onHoursChange = React.useCallback(\n    (event: React.ChangeEvent<HTMLSelectElement>) =>\n      onChange?.(setHours(value, Number(event.target.value))),\n    [onChange, value],\n  );\n  const onMinutesChange = React.useCallback(\n    (event: React.ChangeEvent<HTMLSelectElement>) =>\n      onChange?.(setMinutes(value, Number(event.target.value))),\n    [onChange, value],\n  );\n\n  return (\n    <div className={styles['CalendarTime']}>\n      <div className={styles['CalendarTime__picker']}>\n        <AdaptivityProvider sizeY={SizeType.COMPACT}>\n          <CustomSelect\n            value={value.getHours()}\n            options={localHours}\n            onChange={onHoursChange}\n            forceDropdownPortal={false}\n            aria-label={changeHoursAriaLabel}\n          />\n        </AdaptivityProvider>\n      </div>\n      <div className={styles['CalendarTime__divider']}>:</div>\n      <div className={styles['CalendarTime__picker']}>\n        <AdaptivityProvider sizeY={SizeType.COMPACT}>\n          <CustomSelect\n            value={value.getMinutes()}\n            options={localMinutes}\n            onChange={onMinutesChange}\n            forceDropdownPortal={false}\n            aria-label={changeMinutesAriaLabel}\n          />\n        </AdaptivityProvider>\n      </div>\n      <div className={styles['CalendarTime__button']}>\n        <AdaptivityProvider sizeY={SizeType.COMPACT}>\n          <Button mode=\"secondary\" onClick={onClose} size=\"l\" aria-label={doneButtonText}>\n            {doneButtonText}\n          </Button>\n        </AdaptivityProvider>\n      </div>\n    </div>\n  );\n};\n"],"names":["React","SizeType","setHours","setMinutes","AdaptivityProvider","Button","CustomSelect","styles","hours","i","push","value","label","String","padStart","minutes","CalendarTime","doneButtonText","onChange","onClose","changeHoursAriaLabel","changeMinutesAriaLabel","isDayDisabled","localHours","map","hour","disabled","localMinutes","minute","onHoursChange","useCallback","event","Number","target","onMinutesChange","div","className","sizeY","COMPACT","getHours","options","forceDropdownPortal","aria-label","getMinutes","mode","onClick","size"],"mappings":"AAAA,YAAYA,WAAW,QAAQ;AAC/B,SAASC,QAAQ,QAAQ,uBAAuB;AAChD,SAASC,QAAQ,EAAEC,UAAU,QAAQ,iBAAiB;AACtD,SAASC,kBAAkB,QAAQ,2CAA2C;AAC9E,SAASC,MAAM,QAAQ,mBAAmB;AAC1C,SAASC,YAAY,QAAQ,+BAA+B;AAC5D,OAAOC,YAAY,4BAA4B;AAY/C,MAAMC,QAGD,EAAE;AACP,IAAK,IAAIC,IAAI,GAAGA,IAAI,IAAIA,KAAK,EAAG;IAC9BD,MAAME,IAAI,CAAC;QAAEC,OAAOF;QAAGG,OAAOC,OAAOJ,GAAGK,QAAQ,CAAC,GAAG;IAAK;AAC3D;AAEA,MAAMC,UAGD,EAAE;AACP,IAAK,IAAIN,IAAI,GAAGA,IAAI,IAAIA,KAAK,EAAG;IAC9BM,QAAQL,IAAI,CAAC;QAAEC,OAAOF;QAAGG,OAAOC,OAAOJ,GAAGK,QAAQ,CAAC,GAAG;IAAK;AAC7D;AAEA,OAAO,MAAME,eAAe,CAAC,EAC3BL,KAAK,EACLM,iBAAiB,QAAQ,EACzBC,QAAQ,EACRC,OAAO,EACPC,uBAAuB,cAAc,EACrCC,yBAAyB,iBAAiB,EAC1CC,aAAa,EACK;IAClB,MAAMC,aAAaD,gBACfd,MAAMgB,GAAG,CAAC,CAACC;QACT,OAAO;YAAE,GAAGA,IAAI;YAAEC,UAAUJ,cAAcpB,SAASS,OAAOc,KAAKd,KAAK,GAAG;QAAM;IAC/E,KACAH;IAEJ,MAAMmB,eAAeL,gBACjBP,QAAQS,GAAG,CAAC,CAACI;QACX,OAAO;YAAE,GAAGA,MAAM;YAAEF,UAAUJ,cAAcnB,WAAWQ,OAAOiB,OAAOjB,KAAK,GAAG;QAAM;IACrF,KACAI;IAEJ,MAAMc,gBAAgB7B,MAAM8B,WAAW,CACrC,CAACC,QACCb,WAAWhB,SAASS,OAAOqB,OAAOD,MAAME,MAAM,CAACtB,KAAK,KACtD;QAACO;QAAUP;KAAM;IAEnB,MAAMuB,kBAAkBlC,MAAM8B,WAAW,CACvC,CAACC,QACCb,WAAWf,WAAWQ,OAAOqB,OAAOD,MAAME,MAAM,CAACtB,KAAK,KACxD;QAACO;QAAUP;KAAM;IAGnB,qBACE,oBAACwB;QAAIC,WAAW7B,MAAM,CAAC,eAAe;qBACpC,oBAAC4B;QAAIC,WAAW7B,MAAM,CAAC,uBAAuB;qBAC5C,oBAACH;QAAmBiC,OAAOpC,SAASqC,OAAO;qBACzC,oBAAChC;QACCK,OAAOA,MAAM4B,QAAQ;QACrBC,SAASjB;QACTL,UAAUW;QACVY,qBAAqB;QACrBC,cAAYtB;wBAIlB,oBAACe;QAAIC,WAAW7B,MAAM,CAAC,wBAAwB;OAAE,oBACjD,oBAAC4B;QAAIC,WAAW7B,MAAM,CAAC,uBAAuB;qBAC5C,oBAACH;QAAmBiC,OAAOpC,SAASqC,OAAO;qBACzC,oBAAChC;QACCK,OAAOA,MAAMgC,UAAU;QACvBH,SAASb;QACTT,UAAUgB;QACVO,qBAAqB;QACrBC,cAAYrB;wBAIlB,oBAACc;QAAIC,WAAW7B,MAAM,CAAC,uBAAuB;qBAC5C,oBAACH;QAAmBiC,OAAOpC,SAASqC,OAAO;qBACzC,oBAACjC;QAAOuC,MAAK;QAAYC,SAAS1B;QAAS2B,MAAK;QAAIJ,cAAYzB;OAC7DA;AAMb,EAAE"}