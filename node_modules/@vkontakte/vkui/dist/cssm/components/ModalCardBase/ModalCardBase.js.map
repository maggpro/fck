{"version":3,"sources":["../../../../src/components/ModalCardBase/ModalCardBase.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames, hasReactNode } from '@vkontakte/vkjs';\nimport { useAdaptivityWithJSMediaQueries } from '../../hooks/useAdaptivityWithJSMediaQueries';\nimport { useKeyboard } from '../../hooks/useKeyboard';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { SizeType } from '../../lib/adaptivity';\nimport { Platform } from '../../lib/platform';\nimport { HTMLAttributesWithRootRef } from '../../types';\nimport { AdaptivityContext } from '../AdaptivityProvider/AdaptivityContext';\nimport { RootComponent } from '../RootComponent/RootComponent';\nimport { Subhead } from '../Typography/Subhead/Subhead';\nimport { Title } from '../Typography/Title/Title';\nimport { ModalCardBaseCloseButton } from './ModalCardBaseCloseButton';\nimport styles from './ModalCardBase.module.css';\n\nexport interface ModalCardBaseProps extends HTMLAttributesWithRootRef<HTMLDivElement> {\n  /**\n   * Иконка.\n   *\n   * Может быть компонентом иконки, например, `<Icon56MoneyTransferOutline />`, или `<Avatar size={72} src=\"\" />`\n   */\n  icon?: React.ReactNode;\n\n  /**\n   * Заголовок карточки\n   */\n  header?: React.ReactNode;\n\n  /**\n   * Подзаголовок\n   */\n  subheader?: React.ReactNode;\n\n  /**\n   * Кнопки-действия. Принимает [`Button`](https://vkcom.github.io/VKUI/#/Button) с параметрами:\n   *\n   * - `size=\"l\" mode=\"primary\" stretched`\n   * - `size=\"l\" mode=\"secondary\" stretched`\n   *\n   * Для набора кнопок используйте [`ButtonGroup`](https://vkcom.github.io/VKUI/#/ButtonGroup) с параметрами:\n   *\n   * - `gap=\"s\" mode=\"horizontal\" stretched`\n   * - `gap=\"m\" mode=\"vertical\" stretched`\n   */\n  actions?: React.ReactNode;\n\n  onClose?: VoidFunction;\n\n  /**\n   * `aria-label` для кнопки закрытия. Необходим, чтобы кнопка была доступной.\n   */\n  dismissLabel?: string;\n\n  /**\n   * Задаёт контенту максимальную ширину для десктопной версии.\n   */\n  size?: number;\n\n  /**\n   * `data-testid` для кнопки закрытия\n   */\n  modalDismissButtonTestId?: string;\n  /**\n   * Расположение кнопки закрытия (внутри и вне `popout'a`)\n   * Доступно только в `compact`-режиме\n   * На `iOS` в `regular`-режиме всегда включен `inside`\n   */\n  dismissButtonMode?: 'inside' | 'outside';\n}\n\n/**\n * @see https://vkcom.github.io/VKUI/#/ModalCardBase\n */\nexport const ModalCardBase = ({\n  icon,\n  header,\n  subheader,\n  children,\n  actions,\n  onClose,\n  dismissLabel = 'Скрыть',\n  style,\n  size: sizeProp,\n  modalDismissButtonTestId,\n  dismissButtonMode = 'outside',\n  ...restProps\n}: ModalCardBaseProps) => {\n  const platform = usePlatform();\n  const { isDesktop } = useAdaptivityWithJSMediaQueries();\n  const isSoftwareKeyboardOpened = useKeyboard().isOpened;\n\n  const size = isDesktop ? sizeProp : undefined;\n  const withSafeZone =\n    !icon && (dismissButtonMode === 'inside' || (platform === Platform.IOS && !isDesktop));\n\n  return (\n    <RootComponent\n      {...restProps}\n      baseClassName={classNames(\n        'vkuiInternalModalCardBase',\n        platform === Platform.IOS && styles['ModalCardBase--ios'],\n        isDesktop && styles['ModalCardBase--desktop'],\n        withSafeZone && styles['ModalCardBase--withSafeZone'],\n      )}\n      style={{\n        ...style,\n        maxWidth: size,\n      }}\n    >\n      <div\n        className={classNames(\n          styles['ModalCardBase__container'],\n          isSoftwareKeyboardOpened && styles['ModalCardBase__container--softwareKeyboardOpened'],\n        )}\n      >\n        {hasReactNode(icon) && <div className={styles['ModalCardBase__icon']}>{icon}</div>}\n        {hasReactNode(header) && (\n          <Title\n            level=\"2\"\n            weight=\"2\"\n            className={classNames(\n              styles['ModalCardBase__header'],\n              'vkuiInternalModalCardBase__header',\n            )}\n          >\n            {header}\n          </Title>\n        )}\n        {hasReactNode(subheader) && (\n          <AdaptivityContext.Provider value={{ sizeY: SizeType.REGULAR }}>\n            <Subhead\n              className={classNames(\n                styles['ModalCardBase__subheader'],\n                'vkuiInternalModalCardBase__subheader',\n              )}\n            >\n              {subheader}\n            </Subhead>\n          </AdaptivityContext.Provider>\n        )}\n\n        {children}\n\n        {hasReactNode(actions) && <div className={styles['ModalCardBase__actions']}>{actions}</div>}\n\n        <ModalCardBaseCloseButton\n          aria-label={dismissLabel}\n          testId={modalDismissButtonTestId}\n          onClose={onClose}\n          mode={dismissButtonMode}\n        />\n      </div>\n    </RootComponent>\n  );\n};\n"],"names":["React","classNames","hasReactNode","useAdaptivityWithJSMediaQueries","useKeyboard","usePlatform","SizeType","Platform","AdaptivityContext","RootComponent","Subhead","Title","ModalCardBaseCloseButton","styles","ModalCardBase","icon","header","subheader","children","actions","onClose","dismissLabel","style","size","sizeProp","modalDismissButtonTestId","dismissButtonMode","restProps","platform","isDesktop","isSoftwareKeyboardOpened","isOpened","undefined","withSafeZone","IOS","baseClassName","maxWidth","div","className","level","weight","Provider","value","sizeY","REGULAR","aria-label","testId","mode"],"mappings":"AAAA,YAAYA,WAAW,QAAQ;AAC/B,SAASC,UAAU,EAAEC,YAAY,QAAQ,kBAAkB;AAC3D,SAASC,+BAA+B,QAAQ,8CAA8C;AAC9F,SAASC,WAAW,QAAQ,0BAA0B;AACtD,SAASC,WAAW,QAAQ,0BAA0B;AACtD,SAASC,QAAQ,QAAQ,uBAAuB;AAChD,SAASC,QAAQ,QAAQ,qBAAqB;AAE9C,SAASC,iBAAiB,QAAQ,0CAA0C;AAC5E,SAASC,aAAa,QAAQ,iCAAiC;AAC/D,SAASC,OAAO,QAAQ,gCAAgC;AACxD,SAASC,KAAK,QAAQ,4BAA4B;AAClD,SAASC,wBAAwB,QAAQ,6BAA6B;AACtE,OAAOC,YAAY,6BAA6B;AAyDhD;;CAEC,GACD,OAAO,MAAMC,gBAAgB,CAAC,EAC5BC,IAAI,EACJC,MAAM,EACNC,SAAS,EACTC,QAAQ,EACRC,OAAO,EACPC,OAAO,EACPC,eAAe,QAAQ,EACvBC,KAAK,EACLC,MAAMC,QAAQ,EACdC,wBAAwB,EACxBC,oBAAoB,SAAS,EAC7B,GAAGC,WACgB;IACnB,MAAMC,WAAWvB;IACjB,MAAM,EAAEwB,SAAS,EAAE,GAAG1B;IACtB,MAAM2B,2BAA2B1B,cAAc2B,QAAQ;IAEvD,MAAMR,OAAOM,YAAYL,WAAWQ;IACpC,MAAMC,eACJ,CAAClB,QAASW,CAAAA,sBAAsB,YAAaE,aAAarB,SAAS2B,GAAG,IAAI,CAACL,SAAS;IAEtF,qBACE,oBAACpB;QACE,GAAGkB,SAAS;QACbQ,eAAelC,WACb,6BACA2B,aAAarB,SAAS2B,GAAG,IAAIrB,MAAM,CAAC,qBAAqB,EACzDgB,aAAahB,MAAM,CAAC,yBAAyB,EAC7CoB,gBAAgBpB,MAAM,CAAC,8BAA8B;QAEvDS,OAAO;YACL,GAAGA,KAAK;YACRc,UAAUb;QACZ;qBAEA,oBAACc;QACCC,WAAWrC,WACTY,MAAM,CAAC,2BAA2B,EAClCiB,4BAA4BjB,MAAM,CAAC,mDAAmD;OAGvFX,aAAaa,uBAAS,oBAACsB;QAAIC,WAAWzB,MAAM,CAAC,sBAAsB;OAAGE,OACtEb,aAAac,yBACZ,oBAACL;QACC4B,OAAM;QACNC,QAAO;QACPF,WAAWrC,WACTY,MAAM,CAAC,wBAAwB,EAC/B;OAGDG,SAGJd,aAAae,4BACZ,oBAACT,kBAAkBiC,QAAQ;QAACC,OAAO;YAAEC,OAAOrC,SAASsC,OAAO;QAAC;qBAC3D,oBAAClC;QACC4B,WAAWrC,WACTY,MAAM,CAAC,2BAA2B,EAClC;OAGDI,aAKNC,UAEAhB,aAAaiB,0BAAY,oBAACkB;QAAIC,WAAWzB,MAAM,CAAC,yBAAyB;OAAGM,wBAE7E,oBAACP;QACCiC,cAAYxB;QACZyB,QAAQrB;QACRL,SAASA;QACT2B,MAAMrB;;AAKhB,EAAE"}