{"version":3,"sources":["../../src/hooks/useTimeout.ts"],"sourcesContent":["import * as React from 'react';\nimport { canUseDOM } from '../lib/dom';\nimport { useIsomorphicLayoutEffect } from '../lib/useIsomorphicLayoutEffect';\n\nexport function useTimeout(cb: () => any, duration: number) {\n  const options = React.useRef({ cb, duration });\n  useIsomorphicLayoutEffect(() => {\n    options.current.cb = cb;\n    options.current.duration = duration;\n  }, [cb, duration]);\n\n  const timeout = React.useRef<ReturnType<typeof setTimeout>>();\n  const clear = React.useCallback(() => {\n    if (canUseDOM && timeout?.current) {\n      clearTimeout(timeout.current);\n    }\n  }, []);\n  const set = React.useCallback(\n    (duration = options.current.duration) => {\n      clear();\n      if (canUseDOM) {\n        timeout.current = setTimeout(() => {\n          const { cb } = options.current;\n          typeof cb === 'function' && cb();\n        }, duration);\n      }\n    },\n    [clear],\n  );\n  useIsomorphicLayoutEffect(() => clear, []);\n\n  return { set, clear };\n}\n"],"names":["React","canUseDOM","useIsomorphicLayoutEffect","useTimeout","cb","duration","options","useRef","current","timeout","clear","useCallback","clearTimeout","set","setTimeout"],"mappings":"AAAA,YAAYA,WAAW,QAAQ;AAC/B,SAASC,SAAS,QAAQ,aAAa;AACvC,SAASC,yBAAyB,QAAQ,mCAAmC;AAE7E,OAAO,SAASC,WAAWC,EAAa,EAAEC,QAAgB;IACxD,IAAMC,UAAUN,MAAMO,MAAM,CAAC;QAAEH,IAAAA;QAAIC,UAAAA;IAAS;IAC5CH,0BAA0B;QACxBI,QAAQE,OAAO,CAACJ,EAAE,GAAGA;QACrBE,QAAQE,OAAO,CAACH,QAAQ,GAAGA;IAC7B,GAAG;QAACD;QAAIC;KAAS;IAEjB,IAAMI,UAAUT,MAAMO,MAAM;IAC5B,IAAMG,QAAQV,MAAMW,WAAW,CAAC;QAC9B,IAAIV,cAAaQ,oBAAAA,8BAAAA,QAASD,OAAO,GAAE;YACjCI,aAAaH,QAAQD,OAAO;QAC9B;IACF,GAAG,EAAE;IACL,IAAMK,MAAMb,MAAMW,WAAW,CAC3B;YAACN,8EAAWC,QAAQE,OAAO,CAACH,QAAQ;QAClCK;QACA,IAAIT,WAAW;YACbQ,QAAQD,OAAO,GAAGM,WAAW;gBAC3B,IAAM,AAAEV,OAAOE,QAAQE,OAAO,CAAtBJ;gBACR,OAAOA,SAAO,cAAcA;YAC9B,GAAGC;QACL;IACF,GACA;QAACK;KAAM;IAETR,0BAA0B;eAAMQ;OAAO,EAAE;IAEzC,OAAO;QAAEG,KAAAA;QAAKH,OAAAA;IAAM;AACtB"}