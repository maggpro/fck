{"version":3,"sources":["../../src/hooks/useChipsInput.ts"],"sourcesContent":["import * as React from 'react';\nimport { ChipOption } from '../components/Chip/Chip';\nimport { ChipsInputBaseProps } from '../components/ChipsInputBase/ChipsInputBase';\n\nexport const useChipsInput = <Option extends ChipOption>(\n  props: Partial<ChipsInputBaseProps<Option>>,\n) => {\n  const { value, getOptionValue, onChange, onInputChange, getNewOptionData } = props;\n\n  const [fieldValue, setFieldValue] = React.useState(props.inputValue);\n  const [selectedOptions, setSelectedOptions] = React.useState(value ?? []);\n\n  const clearInput = React.useCallback(() => {\n    setFieldValue('');\n    onInputChange!({ target: { value: '' } } as any);\n  }, [onInputChange]);\n\n  const handleInputChange = React.useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setFieldValue(e.target.value);\n      onInputChange!(e);\n    },\n    [onInputChange],\n  );\n\n  const toggleOption = React.useCallback(\n    (newOption: Option, value?: boolean) => {\n      const newSelectedOptions = selectedOptions.filter(\n        (option: Option) => getOptionValue!(newOption) !== getOptionValue!(option),\n      );\n\n      if (value === true) {\n        newSelectedOptions.push(newOption);\n      }\n\n      setSelectedOptions(newSelectedOptions);\n      onChange!(newSelectedOptions);\n    },\n    [selectedOptions, getOptionValue, onChange],\n  );\n\n  const addOption = React.useCallback(\n    (newOption: Option) => toggleOption(newOption, true),\n    [toggleOption],\n  );\n  const addOptionFromInput = React.useCallback(() => {\n    const trimmedValue = fieldValue?.trim();\n\n    if (trimmedValue) {\n      addOption(getNewOptionData!(undefined, trimmedValue));\n      clearInput();\n    }\n  }, [addOption, clearInput, getNewOptionData, fieldValue]);\n  const removeOption = React.useCallback(\n    (value) => {\n      toggleOption(getNewOptionData!(undefined, value as string), false);\n    },\n    [toggleOption, getNewOptionData],\n  );\n\n  React.useEffect(() => {\n    setSelectedOptions(value as Option[]);\n\n    return () => setSelectedOptions([]);\n  }, [props.value, value]);\n\n  React.useEffect(() => {\n    setFieldValue(props.inputValue);\n\n    return () => setFieldValue('');\n  }, [props.inputValue]);\n\n  return {\n    fieldValue,\n    setFieldValue,\n    selectedOptions,\n    setSelectedOptions,\n    clearInput,\n    toggleOption,\n    addOption,\n    addOptionFromInput,\n    removeOption,\n    handleInputChange,\n  };\n};\n"],"names":["React","useChipsInput","props","value","getOptionValue","onChange","onInputChange","getNewOptionData","useState","inputValue","fieldValue","setFieldValue","selectedOptions","setSelectedOptions","clearInput","useCallback","target","handleInputChange","e","toggleOption","newOption","newSelectedOptions","filter","option","push","addOption","addOptionFromInput","trimmedValue","trim","undefined","removeOption","useEffect"],"mappings":";AAAA,YAAYA,WAAW,QAAQ;AAI/B,OAAO,IAAMC,gBAAgB,SAC3BC;IAEA,IAAQC,QAAqED,MAArEC,OAAOC,iBAA8DF,MAA9DE,gBAAgBC,WAA8CH,MAA9CG,UAAUC,gBAAoCJ,MAApCI,eAAeC,mBAAqBL,MAArBK;IAExD,IAAoCP,mCAAAA,MAAMQ,QAAQ,CAACN,MAAMO,UAAU,OAA5DC,aAA6BV,oBAAjBW,gBAAiBX;IACpC,IAA8CA,oCAAAA,MAAMQ,QAAQ,CAACL,kBAAAA,mBAAAA,QAAS,EAAE,OAAjES,kBAAuCZ,qBAAtBa,qBAAsBb;IAE9C,IAAMc,aAAad,MAAMe,WAAW,CAAC;QACnCJ,cAAc;QACdL,cAAe;YAAEU,QAAQ;gBAAEb,OAAO;YAAG;QAAE;IACzC,GAAG;QAACG;KAAc;IAElB,IAAMW,oBAAoBjB,MAAMe,WAAW,CACzC,SAACG;QACCP,cAAcO,EAAEF,MAAM,CAACb,KAAK;QAC5BG,cAAeY;IACjB,GACA;QAACZ;KAAc;IAGjB,IAAMa,eAAenB,MAAMe,WAAW,CACpC,SAACK,WAAmBjB;QAClB,IAAMkB,qBAAqBT,gBAAgBU,MAAM,CAC/C,SAACC;mBAAmBnB,eAAgBgB,eAAehB,eAAgBmB;;QAGrE,IAAIpB,UAAU,MAAM;YAClBkB,mBAAmBG,IAAI,CAACJ;QAC1B;QAEAP,mBAAmBQ;QACnBhB,SAAUgB;IACZ,GACA;QAACT;QAAiBR;QAAgBC;KAAS;IAG7C,IAAMoB,YAAYzB,MAAMe,WAAW,CACjC,SAACK;eAAsBD,aAAaC,WAAW;OAC/C;QAACD;KAAa;IAEhB,IAAMO,qBAAqB1B,MAAMe,WAAW,CAAC;QAC3C,IAAMY,eAAejB,uBAAAA,iCAAAA,WAAYkB,IAAI;QAErC,IAAID,cAAc;YAChBF,UAAUlB,iBAAkBsB,WAAWF;YACvCb;QACF;IACF,GAAG;QAACW;QAAWX;QAAYP;QAAkBG;KAAW;IACxD,IAAMoB,eAAe9B,MAAMe,WAAW,CACpC,SAACZ;QACCgB,aAAaZ,iBAAkBsB,WAAW1B,QAAkB;IAC9D,GACA;QAACgB;QAAcZ;KAAiB;IAGlCP,MAAM+B,SAAS,CAAC;QACdlB,mBAAmBV;QAEnB,OAAO;mBAAMU,mBAAmB,EAAE;;IACpC,GAAG;QAACX,MAAMC,KAAK;QAAEA;KAAM;IAEvBH,MAAM+B,SAAS,CAAC;QACdpB,cAAcT,MAAMO,UAAU;QAE9B,OAAO;mBAAME,cAAc;;IAC7B,GAAG;QAACT,MAAMO,UAAU;KAAC;IAErB,OAAO;QACLC,YAAAA;QACAC,eAAAA;QACAC,iBAAAA;QACAC,oBAAAA;QACAC,YAAAA;QACAK,cAAAA;QACAM,WAAAA;QACAC,oBAAAA;QACAI,cAAAA;QACAb,mBAAAA;IACF;AACF,EAAE"}