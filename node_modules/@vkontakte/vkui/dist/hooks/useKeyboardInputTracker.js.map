{"version":3,"sources":["../../src/hooks/useKeyboardInputTracker.ts"],"sourcesContent":["import * as React from 'react';\nimport { Keys, pressedKey } from '../lib/accessibility';\nimport { useDOM } from '../lib/dom';\nimport { useGlobalEventListener } from './useGlobalEventListener';\n\nexport const ENABLE_KEYBOARD_INPUT_EVENT_NAME = 'enableKeyboardInput';\nexport const DISABLE_KEYBOARD_INPUT_EVENT_NAME = 'disableKeyboardInput';\n\nexport function useKeyboardInputTracker(): boolean {\n  const { document } = useDOM();\n\n  const [isKeyboardInputActive, toggleKeyboardInput] = React.useState<boolean>(false);\n\n  const enableKeyboardInput = React.useCallback(() => {\n    toggleKeyboardInput(true);\n  }, []);\n\n  const handleKeydown = React.useCallback(\n    (e: KeyboardEvent) => {\n      if (pressedKey(e) === Keys.TAB) {\n        enableKeyboardInput();\n      }\n    },\n    [enableKeyboardInput],\n  );\n\n  const disableKeyboardInput = React.useCallback(() => {\n    toggleKeyboardInput(false);\n  }, []);\n\n  const eventOptions = {\n    passive: true,\n    capture: true,\n  };\n\n  useGlobalEventListener(document, 'keydown', handleKeydown, eventOptions);\n  useGlobalEventListener(document, 'mousedown', disableKeyboardInput, eventOptions);\n  useGlobalEventListener(document, 'touchstart', disableKeyboardInput, eventOptions);\n  useGlobalEventListener(\n    document,\n    ENABLE_KEYBOARD_INPUT_EVENT_NAME,\n    enableKeyboardInput,\n    eventOptions,\n  );\n  useGlobalEventListener(\n    document,\n    DISABLE_KEYBOARD_INPUT_EVENT_NAME,\n    disableKeyboardInput,\n    eventOptions,\n  );\n\n  return isKeyboardInputActive;\n}\n"],"names":["React","Keys","pressedKey","useDOM","useGlobalEventListener","ENABLE_KEYBOARD_INPUT_EVENT_NAME","DISABLE_KEYBOARD_INPUT_EVENT_NAME","useKeyboardInputTracker","document","useState","isKeyboardInputActive","toggleKeyboardInput","enableKeyboardInput","useCallback","handleKeydown","e","TAB","disableKeyboardInput","eventOptions","passive","capture"],"mappings":";AAAA,YAAYA,WAAW,QAAQ;AAC/B,SAASC,IAAI,EAAEC,UAAU,QAAQ,uBAAuB;AACxD,SAASC,MAAM,QAAQ,aAAa;AACpC,SAASC,sBAAsB,QAAQ,2BAA2B;AAElE,OAAO,IAAMC,mCAAmC,sBAAsB;AACtE,OAAO,IAAMC,oCAAoC,uBAAuB;AAExE,OAAO,SAASC;IACd,IAAM,AAAEC,WAAaL,SAAbK;IAER,IAAqDR,mCAAAA,MAAMS,QAAQ,CAAU,YAAtEC,wBAA8CV,oBAAvBW,sBAAuBX;IAErD,IAAMY,sBAAsBZ,MAAMa,WAAW,CAAC;QAC5CF,oBAAoB;IACtB,GAAG,EAAE;IAEL,IAAMG,gBAAgBd,MAAMa,WAAW,CACrC,SAACE;QACC,IAAIb,WAAWa,OAAOd,KAAKe,GAAG,EAAE;YAC9BJ;QACF;IACF,GACA;QAACA;KAAoB;IAGvB,IAAMK,uBAAuBjB,MAAMa,WAAW,CAAC;QAC7CF,oBAAoB;IACtB,GAAG,EAAE;IAEL,IAAMO,eAAe;QACnBC,SAAS;QACTC,SAAS;IACX;IAEAhB,uBAAuBI,UAAU,WAAWM,eAAeI;IAC3Dd,uBAAuBI,UAAU,aAAaS,sBAAsBC;IACpEd,uBAAuBI,UAAU,cAAcS,sBAAsBC;IACrEd,uBACEI,UACAH,kCACAO,qBACAM;IAEFd,uBACEI,UACAF,mCACAW,sBACAC;IAGF,OAAOR;AACT"}