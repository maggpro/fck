{"version":3,"sources":["../../../src/hooks/useChipsInput.ts"],"sourcesContent":["import * as React from 'react';\nimport { ChipOption } from '../components/Chip/Chip';\nimport { ChipsInputBaseProps } from '../components/ChipsInputBase/ChipsInputBase';\n\nexport const useChipsInput = <Option extends ChipOption>(\n  props: Partial<ChipsInputBaseProps<Option>>,\n) => {\n  const { value, getOptionValue, onChange, onInputChange, getNewOptionData } = props;\n\n  const [fieldValue, setFieldValue] = React.useState(props.inputValue);\n  const [selectedOptions, setSelectedOptions] = React.useState(value ?? []);\n\n  const clearInput = React.useCallback(() => {\n    setFieldValue('');\n    onInputChange!({ target: { value: '' } } as any);\n  }, [onInputChange]);\n\n  const handleInputChange = React.useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setFieldValue(e.target.value);\n      onInputChange!(e);\n    },\n    [onInputChange],\n  );\n\n  const toggleOption = React.useCallback(\n    (newOption: Option, value?: boolean) => {\n      const newSelectedOptions = selectedOptions.filter(\n        (option: Option) => getOptionValue!(newOption) !== getOptionValue!(option),\n      );\n\n      if (value === true) {\n        newSelectedOptions.push(newOption);\n      }\n\n      setSelectedOptions(newSelectedOptions);\n      onChange!(newSelectedOptions);\n    },\n    [selectedOptions, getOptionValue, onChange],\n  );\n\n  const addOption = React.useCallback(\n    (newOption: Option) => toggleOption(newOption, true),\n    [toggleOption],\n  );\n  const addOptionFromInput = React.useCallback(() => {\n    const trimmedValue = fieldValue?.trim();\n\n    if (trimmedValue) {\n      addOption(getNewOptionData!(undefined, trimmedValue));\n      clearInput();\n    }\n  }, [addOption, clearInput, getNewOptionData, fieldValue]);\n  const removeOption = React.useCallback(\n    (value) => {\n      toggleOption(getNewOptionData!(undefined, value as string), false);\n    },\n    [toggleOption, getNewOptionData],\n  );\n\n  React.useEffect(() => {\n    setSelectedOptions(value as Option[]);\n\n    return () => setSelectedOptions([]);\n  }, [props.value, value]);\n\n  React.useEffect(() => {\n    setFieldValue(props.inputValue);\n\n    return () => setFieldValue('');\n  }, [props.inputValue]);\n\n  return {\n    fieldValue,\n    setFieldValue,\n    selectedOptions,\n    setSelectedOptions,\n    clearInput,\n    toggleOption,\n    addOption,\n    addOptionFromInput,\n    removeOption,\n    handleInputChange,\n  };\n};\n"],"names":["useChipsInput","props","value","getOptionValue","onChange","onInputChange","getNewOptionData","React","useState","inputValue","fieldValue","setFieldValue","selectedOptions","setSelectedOptions","clearInput","useCallback","target","handleInputChange","e","toggleOption","newOption","newSelectedOptions","filter","option","push","addOption","addOptionFromInput","trimmedValue","trim","undefined","removeOption","useEffect"],"mappings":";;;;+BAIaA;;;eAAAA;;;;;+DAJU;AAIhB,IAAMA,gBAAgB,SAC3BC;IAEA,IAAQC,QAAqED,MAArEC,OAAOC,iBAA8DF,MAA9DE,gBAAgBC,WAA8CH,MAA9CG,UAAUC,gBAAoCJ,MAApCI,eAAeC,mBAAqBL,MAArBK;IAExD,IAAoCC,qCAAAA,OAAMC,QAAQ,CAACP,MAAMQ,UAAU,OAA5DC,aAA6BH,oBAAjBI,gBAAiBJ;IACpC,IAA8CA,sCAAAA,OAAMC,QAAQ,CAACN,kBAAAA,mBAAAA,QAAS,EAAE,OAAjEU,kBAAuCL,qBAAtBM,qBAAsBN;IAE9C,IAAMO,aAAaP,OAAMQ,WAAW,CAAC;QACnCJ,cAAc;QACdN,cAAe;YAAEW,QAAQ;gBAAEd,OAAO;YAAG;QAAE;IACzC,GAAG;QAACG;KAAc;IAElB,IAAMY,oBAAoBV,OAAMQ,WAAW,CACzC,SAACG;QACCP,cAAcO,EAAEF,MAAM,CAACd,KAAK;QAC5BG,cAAea;IACjB,GACA;QAACb;KAAc;IAGjB,IAAMc,eAAeZ,OAAMQ,WAAW,CACpC,SAACK,WAAmBlB;QAClB,IAAMmB,qBAAqBT,gBAAgBU,MAAM,CAC/C,SAACC;mBAAmBpB,eAAgBiB,eAAejB,eAAgBoB;;QAGrE,IAAIrB,UAAU,MAAM;YAClBmB,mBAAmBG,IAAI,CAACJ;QAC1B;QAEAP,mBAAmBQ;QACnBjB,SAAUiB;IACZ,GACA;QAACT;QAAiBT;QAAgBC;KAAS;IAG7C,IAAMqB,YAAYlB,OAAMQ,WAAW,CACjC,SAACK;eAAsBD,aAAaC,WAAW;OAC/C;QAACD;KAAa;IAEhB,IAAMO,qBAAqBnB,OAAMQ,WAAW,CAAC;QAC3C,IAAMY,eAAejB,uBAAAA,iCAAAA,WAAYkB,IAAI;QAErC,IAAID,cAAc;YAChBF,UAAUnB,iBAAkBuB,WAAWF;YACvCb;QACF;IACF,GAAG;QAACW;QAAWX;QAAYR;QAAkBI;KAAW;IACxD,IAAMoB,eAAevB,OAAMQ,WAAW,CACpC,SAACb;QACCiB,aAAab,iBAAkBuB,WAAW3B,QAAkB;IAC9D,GACA;QAACiB;QAAcb;KAAiB;IAGlCC,OAAMwB,SAAS,CAAC;QACdlB,mBAAmBX;QAEnB,OAAO;mBAAMW,mBAAmB,EAAE;;IACpC,GAAG;QAACZ,MAAMC,KAAK;QAAEA;KAAM;IAEvBK,OAAMwB,SAAS,CAAC;QACdpB,cAAcV,MAAMQ,UAAU;QAE9B,OAAO;mBAAME,cAAc;;IAC7B,GAAG;QAACV,MAAMQ,UAAU;KAAC;IAErB,OAAO;QACLC,YAAAA;QACAC,eAAAA;QACAC,iBAAAA;QACAC,oBAAAA;QACAC,YAAAA;QACAK,cAAAA;QACAM,WAAAA;QACAC,oBAAAA;QACAI,cAAAA;QACAb,mBAAAA;IACF;AACF"}