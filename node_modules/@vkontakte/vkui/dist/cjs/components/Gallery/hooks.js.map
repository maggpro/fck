{"version":3,"sources":["../../../../src/components/Gallery/hooks.ts"],"sourcesContent":["import * as React from 'react';\nimport { useTimeout } from '../../hooks/useTimeout';\nimport { useDOM } from '../../lib/dom';\n\nexport function useAutoPlay(timeout: number, slideIndex: number, callbackFn: VoidFunction) {\n  const { clear: clearAutoPlay, set: setAutoPlay } = useTimeout(callbackFn, timeout);\n  const { document } = useDOM();\n\n  React.useEffect(\n    () => (timeout ? setAutoPlay() : clearAutoPlay()),\n    [timeout, slideIndex, clearAutoPlay, setAutoPlay],\n  );\n\n  // Отключаем прокрутку слайдов при неактивной вкладке\n  React.useEffect(\n    function preventSlideChange() {\n      if (!document || !timeout) {\n        return;\n      }\n\n      const changeAutoPlay = () => {\n        if (document.visibilityState === 'visible') {\n          clearAutoPlay();\n          setAutoPlay();\n        }\n        if (document.visibilityState === 'hidden') {\n          clearAutoPlay();\n        }\n      };\n\n      document.addEventListener('visibilitychange', changeAutoPlay);\n\n      return () => {\n        document.removeEventListener('visibilitychange', changeAutoPlay);\n      };\n    },\n    [document, timeout, clearAutoPlay, setAutoPlay],\n  );\n}\n"],"names":["useAutoPlay","timeout","slideIndex","callbackFn","useTimeout","clear","clearAutoPlay","set","setAutoPlay","document","useDOM","React","useEffect","preventSlideChange","changeAutoPlay","visibilityState","addEventListener","removeEventListener"],"mappings":";;;;+BAIgBA;;;eAAAA;;;;+DAJO;0BACI;mBACJ;AAEhB,SAASA,YAAYC,OAAe,EAAEC,UAAkB,EAAEC,UAAwB;IACvF,IAAmDC,eAAAA,IAAAA,sBAAU,EAACD,YAAYF,UAAlEI,AAAOC,gBAAoCF,aAA3CC,OAAsBE,AAAKC,cAAgBJ,aAArBG;IAC9B,IAAM,AAAEE,WAAaC,IAAAA,WAAM,IAAnBD;IAERE,OAAMC,SAAS,CACb;eAAOX,UAAUO,gBAAgBF;OACjC;QAACL;QAASC;QAAYI;QAAeE;KAAY;IAGnD,qDAAqD;IACrDG,OAAMC,SAAS,CACb,SAASC;QACP,IAAI,CAACJ,YAAY,CAACR,SAAS;YACzB;QACF;QAEA,IAAMa,iBAAiB;YACrB,IAAIL,SAASM,eAAe,KAAK,WAAW;gBAC1CT;gBACAE;YACF;YACA,IAAIC,SAASM,eAAe,KAAK,UAAU;gBACzCT;YACF;QACF;QAEAG,SAASO,gBAAgB,CAAC,oBAAoBF;QAE9C,OAAO;YACLL,SAASQ,mBAAmB,CAAC,oBAAoBH;QACnD;IACF,GACA;QAACL;QAAUR;QAASK;QAAeE;KAAY;AAEnD"}