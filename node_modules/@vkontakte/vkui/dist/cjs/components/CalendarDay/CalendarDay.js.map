{"version":3,"sources":["../../../../src/components/CalendarDay/CalendarDay.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { ENABLE_KEYBOARD_INPUT_EVENT_NAME } from '../../hooks/useKeyboardInputTracker';\nimport { useConfigProvider } from '../ConfigProvider/ConfigProviderContext';\nimport { Tappable, TappableElementProps } from '../Tappable/Tappable';\nimport styles from './CalendarDay.module.css';\n\nexport type CalendarDayElementProps = Omit<\n  TappableElementProps,\n  'onChange' | 'size' | 'disabled' | 'selected'\n>;\n\nexport interface CalendarDayProps extends CalendarDayElementProps {\n  day: Date;\n  today?: boolean;\n  selected?: boolean;\n  selectionStart?: boolean;\n  selectionEnd?: boolean;\n  hintedSelectionStart?: boolean;\n  hintedSelectionEnd?: boolean;\n  active?: boolean;\n  hidden?: boolean;\n  disabled?: boolean;\n  focused?: boolean;\n  hinted?: boolean;\n  sameMonth?: boolean;\n  size?: 's' | 'm';\n  onChange(value: Date): void;\n  onEnter?(value: Date): void;\n  onLeave?(value: Date): void;\n}\n\nexport const CalendarDay = React.memo(\n  ({\n    day,\n    today,\n    selected,\n    onChange,\n    hidden,\n    disabled,\n    active,\n    selectionStart,\n    selectionEnd,\n    focused,\n    onEnter,\n    onLeave,\n    hinted,\n    hintedSelectionStart,\n    hintedSelectionEnd,\n    sameMonth,\n    size,\n    className,\n    ...props\n  }: CalendarDayProps) => {\n    const { locale } = useConfigProvider();\n    const ref = React.useRef<HTMLElement>(null);\n    const onClick = React.useCallback(() => onChange(day), [day, onChange]);\n    const handleEnter = React.useCallback(() => onEnter?.(day), [day, onEnter]);\n    const handleLeave = React.useCallback(() => onLeave?.(day), [day, onLeave]);\n\n    React.useEffect(() => {\n      if (focused && ref.current) {\n        ref.current.dispatchEvent(new Event(ENABLE_KEYBOARD_INPUT_EVENT_NAME, { bubbles: true }));\n        ref.current.focus();\n      }\n    }, [focused]);\n\n    if (hidden) {\n      return <div className={styles['CalendarDay__hidden']}></div>;\n    }\n\n    return (\n      <Tappable\n        className={classNames(\n          styles['CalendarDay'],\n          size === 's' && styles['CalendarDay--size-s'],\n          today && styles['CalendarDay--today'],\n          selected && !disabled && styles['CalendarDay--selected'],\n          selectionStart && styles['CalendarDay--selection-start'],\n          selectionEnd && styles['CalendarDay--selection-end'],\n          disabled && styles['CalendarDay--disabled'],\n          !sameMonth && styles['CalendarDay--not-same-month'],\n          className,\n        )}\n        hoverMode={active ? '' : styles['CalendarDay--hover']}\n        hasActive={false}\n        onClick={onClick}\n        disabled={disabled}\n        aria-label={new Intl.DateTimeFormat(locale, {\n          weekday: 'long',\n          year: 'numeric',\n          month: 'long',\n          day: 'numeric',\n        }).format(day)}\n        tabIndex={-1}\n        getRootRef={ref}\n        focusVisibleMode={active ? 'outside' : 'inside'}\n        onEnter={handleEnter}\n        onLeave={handleLeave}\n        {...props}\n      >\n        <div\n          className={classNames(\n            styles['CalendarDay__hinted'],\n            hinted && styles['CalendarDay__hinted--active'],\n            hintedSelectionStart && styles['CalendarDay__hinted--selection-start'],\n            hintedSelectionEnd && styles['CalendarDay__hinted--selection-end'],\n          )}\n        >\n          <div\n            className={classNames(\n              styles['CalendarDay__inner'],\n              active && !disabled && styles['CalendarDay__inner--active'],\n            )}\n          >\n            <div className={styles['CalendarDay__day-number']}>{day.getDate()}</div>\n          </div>\n        </div>\n      </Tappable>\n    );\n  },\n);\n\nCalendarDay.displayName = 'CalendarDay';\n"],"names":["CalendarDay","React","memo","day","today","selected","onChange","hidden","disabled","active","selectionStart","selectionEnd","focused","onEnter","onLeave","hinted","hintedSelectionStart","hintedSelectionEnd","sameMonth","size","className","props","locale","useConfigProvider","ref","useRef","onClick","useCallback","handleEnter","handleLeave","useEffect","current","dispatchEvent","Event","ENABLE_KEYBOARD_INPUT_EVENT_NAME","bubbles","focus","div","Tappable","classNames","hoverMode","hasActive","aria-label","Intl","DateTimeFormat","weekday","year","month","format","tabIndex","getRootRef","focusVisibleMode","getDate","displayName"],"mappings":";;;;+BAgCaA;;;eAAAA;;;;;;+DAhCU;oBACI;uCACsB;qCACf;wBACa;AA4BxC,IAAMA,4BAAcC,OAAMC,IAAI,CACnC;QACEC,aAAAA,KACAC,eAAAA,OACAC,kBAAAA,UACAC,kBAAAA,UACAC,gBAAAA,QACAC,kBAAAA,UACAC,gBAAAA,QACAC,wBAAAA,gBACAC,sBAAAA,cACAC,iBAAAA,SACAC,iBAAAA,SACAC,iBAAAA,SACAC,gBAAAA,QACAC,8BAAAA,sBACAC,4BAAAA,oBACAC,mBAAAA,WACAC,cAAAA,MACAC,mBAAAA,WACGC;QAlBHlB;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;;IAGA,IAAM,AAAEE,SAAWC,IAAAA,wCAAiB,IAA5BD;IACR,IAAME,MAAMvB,OAAMwB,MAAM,CAAc;IACtC,IAAMC,UAAUzB,OAAM0B,WAAW,CAAC;eAAMrB,SAASH;OAAM;QAACA;QAAKG;KAAS;IACtE,IAAMsB,cAAc3B,OAAM0B,WAAW,CAAC;eAAMd,oBAAAA,8BAAAA,QAAUV;OAAM;QAACA;QAAKU;KAAQ;IAC1E,IAAMgB,cAAc5B,OAAM0B,WAAW,CAAC;eAAMb,oBAAAA,8BAAAA,QAAUX;OAAM;QAACA;QAAKW;KAAQ;IAE1Eb,OAAM6B,SAAS,CAAC;QACd,IAAIlB,WAAWY,IAAIO,OAAO,EAAE;YAC1BP,IAAIO,OAAO,CAACC,aAAa,CAAC,IAAIC,MAAMC,yDAAgC,EAAE;gBAAEC,SAAS;YAAK;YACtFX,IAAIO,OAAO,CAACK,KAAK;QACnB;IACF,GAAG;QAACxB;KAAQ;IAEZ,IAAIL,QAAQ;QACV,qBAAO,qBAAC8B;YAAIjB,SAAS;;IACvB;IAEA,qBACE,qBAACkB,kBAAQ;QACPlB,WAAWmB,IAAAA,gBAAU,qBAEnBpB,SAAS,kCACTf,mCACAC,YAAY,CAACG,yCACbE,sDACAC,kDACAH,yCACA,CAACU,gDACDE;QAEFoB,WAAW/B,SAAS;QACpBgC,WAAW;QACXf,SAASA;QACTlB,UAAUA;QACVkC,cAAY,IAAIC,KAAKC,cAAc,CAACtB,QAAQ;YAC1CuB,SAAS;YACTC,MAAM;YACNC,OAAO;YACP5C,KAAK;QACP,GAAG6C,MAAM,CAAC7C;QACV8C,UAAU,CAAC;QACXC,YAAY1B;QACZ2B,kBAAkB1C,SAAS,YAAY;QACvCI,SAASe;QACTd,SAASe;OACLR,sBAEJ,qBAACgB;QACCjB,WAAWmB,IAAAA,gBAAU,6BAEnBxB,6CACAC,oEACAC;qBAGF,qBAACoB;QACCjB,WAAWmB,IAAAA,gBAAU,4BAEnB9B,UAAU,CAACD;qBAGb,qBAAC6B;QAAIjB,SAAS;OAAsCjB,IAAIiD,OAAO;AAKzE;AAGFpD,YAAYqD,WAAW,GAAG"}