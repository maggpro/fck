{"version":3,"sources":["../../../../src/components/PanelHeader/PanelHeader.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { useAdaptivity } from '../../hooks/useAdaptivity';\nimport { useAdaptivityConditionalRender } from '../../hooks/useAdaptivityConditionalRender';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { SizeType } from '../../lib/adaptivity';\nimport { Platform } from '../../lib/platform';\nimport { HasComponent, HasDataAttribute, HasRef, HTMLAttributesWithRootRef } from '../../types';\nimport { useConfigProvider } from '../ConfigProvider/ConfigProviderContext';\nimport { FixedLayout } from '../FixedLayout/FixedLayout';\nimport { ModalRootContext } from '../ModalRoot/ModalRootContext';\nimport { RootComponent } from '../RootComponent/RootComponent';\nimport { Separator } from '../Separator/Separator';\nimport { Spacing } from '../Spacing/Spacing';\nimport { TooltipContainer } from '../Tooltip/TooltipContainer';\nimport { Text } from '../Typography/Text/Text';\nimport { LegacyPanelHeaderContent } from './LegacyPanelHeaderContent';\nimport styles from './PanelHeader.module.css';\n\nconst platformClassNames = {\n  ios: classNames(styles['PanelHeader--ios'], 'vkuiInternalPanelHeader--ios'),\n  android: classNames(styles['PanelHeader--android'], 'vkuiInternalPanelHeader--android'),\n  vkcom: classNames(styles['PanelHeader--vkcom'], 'vkuiInternalPanelHeader--vkcom'),\n};\n\nconst sizeXClassNames = {\n  none: styles['PanelHeader--sizeX-none'],\n  regular: styles['PanelHeader--sizeX-regular'],\n};\n\nexport interface PanelHeaderProps\n  extends HTMLAttributesWithRootRef<HTMLDivElement>,\n    HasRef<HTMLDivElement> {\n  before?: React.ReactNode;\n  /**\n   * Добавляет элемент справа.\n   *\n   * При передаче нескольких элементов, расставляет отступы между ними.\n   */\n  after?: React.ReactNode;\n  separator?: boolean;\n  transparent?: boolean;\n  shadow?: boolean;\n  /**\n   * Если `false`, то шапка будет нулевой высоты и контент панели \"залезет\" под неё\n   */\n  visor?: boolean;\n  /**\n   * Если `false`, то шапка будет в потоке. По умолчанию `true`, но если платформа vkcom, то по умолчанию `false`.\n   */\n  fixed?: boolean;\n  /**\n   * По умолчанию как `Component` используется `span`.\n   */\n  typographyProps?: HasComponent & React.HTMLAttributes<HTMLElement> & HasDataAttribute;\n}\n\nconst PanelHeaderIn = ({\n  before,\n  after,\n  separator,\n  children,\n  typographyProps = {},\n}: PanelHeaderProps) => {\n  const { Component = 'span', ...restProps } = typographyProps;\n  const { hasCustomPanelHeaderAfter, customPanelHeaderAfterMinWidth } = useConfigProvider();\n  const { isInsideModal } = React.useContext(ModalRootContext);\n  const platform = usePlatform();\n\n  const afterSlotProps =\n    !hasCustomPanelHeaderAfter || isInsideModal\n      ? {\n          children: after,\n        }\n      : {\n          style: { minWidth: customPanelHeaderAfterMinWidth },\n        };\n  let typographyNode: React.ReactNode;\n\n  // TODO [>=6]: Удалить условие\n  if (\n    React.isValidElement(children) &&\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    (children as JSX.Element).type.displayName === LegacyPanelHeaderContent.displayName\n  ) {\n    typographyNode = children;\n  } else {\n    typographyNode =\n      platform === Platform.VKCOM ? (\n        <Text weight=\"2\" Component={Component} {...restProps}>\n          {children}\n        </Text>\n      ) : (\n        <Component className={styles['PanelHeader__content-in']} {...restProps}>\n          {children}\n        </Component>\n      );\n  }\n\n  return (\n    <React.Fragment>\n      <TooltipContainer fixed className={styles['PanelHeader__in']}>\n        <div\n          className={classNames(styles['PanelHeader__before'], 'vkuiInternalPanelHeader__before')}\n        >\n          {before}\n        </div>\n        <div className={styles['PanelHeader__content']}>{typographyNode}</div>\n        <div\n          className={classNames(styles['PanelHeader__after'], 'vkuiInternalPanelHeader__after')}\n          {...afterSlotProps}\n        />\n      </TooltipContainer>\n      {separator && platform === Platform.VKCOM && (\n        <Separator className={styles['PanelHeader__separator']} wide />\n      )}\n    </React.Fragment>\n  );\n};\n\n/**\n * @see https://vkcom.github.io/VKUI/#/PanelHeader\n */\nexport const PanelHeader = ({\n  before,\n  children,\n  after,\n  separator = true,\n  visor = true,\n  transparent = false,\n  shadow,\n  getRef,\n  getRootRef,\n  fixed,\n  typographyProps,\n  ...restProps\n}: PanelHeaderProps) => {\n  const platform = usePlatform();\n  const { sizeX = 'none' } = useAdaptivity();\n  const { sizeX: adaptiveSizeX } = useAdaptivityConditionalRender();\n  let isFixed = fixed !== undefined ? fixed : platform !== Platform.VKCOM;\n\n  return (\n    <RootComponent\n      {...restProps}\n      baseClassName={classNames(\n        styles['PanelHeader'],\n        'vkuiInternalPanelHeader',\n        platformClassNames.hasOwnProperty(platform)\n          ? platformClassNames[platform]\n          : platformClassNames.android,\n        transparent && styles['PanelHeader--trnsp'],\n        shadow && styles['PanelHeader--shadow'],\n        visor && classNames(styles['PanelHeader--vis'], 'vkuiInternalPanelHeader--vis'),\n        separator &&\n          visor &&\n          classNames(styles['PanelHeader--sep'], 'vkuiInternalPanelHeader--sep'),\n        !before &&\n          classNames(styles['PanelHeader--no-before'], 'vkuiInternalPanelHeader--no-before'),\n        !after && styles['PanelHeader--no-after'],\n        isFixed && styles['PanelHeader--fixed'],\n        sizeX !== SizeType.COMPACT && sizeXClassNames[sizeX],\n      )}\n      getRootRef={isFixed ? getRootRef : getRef}\n    >\n      {isFixed ? (\n        <FixedLayout\n          className={classNames(styles['PanelHeader__fixed'], 'vkuiInternalPanelHeader__fixed')}\n          vertical=\"top\"\n          getRootRef={getRef}\n        >\n          <PanelHeaderIn\n            before={before}\n            after={after}\n            separator={separator}\n            typographyProps={typographyProps}\n          >\n            {children}\n          </PanelHeaderIn>\n        </FixedLayout>\n      ) : (\n        <PanelHeaderIn\n          before={before}\n          after={after}\n          separator={separator}\n          typographyProps={typographyProps}\n        >\n          {children}\n        </PanelHeaderIn>\n      )}\n      {separator && visor && platform !== Platform.VKCOM && (\n        <React.Fragment>\n          {adaptiveSizeX.compact && <Separator className={adaptiveSizeX.compact.className} />}\n          {adaptiveSizeX.regular && (\n            <Spacing className={adaptiveSizeX.regular.className} size={16} />\n          )}\n        </React.Fragment>\n      )}\n    </RootComponent>\n  );\n};\n\nPanelHeader.Content = LegacyPanelHeaderContent;\n"],"names":["PanelHeader","platformClassNames","ios","classNames","android","vkcom","sizeXClassNames","none","regular","PanelHeaderIn","before","after","separator","children","typographyProps","Component","restProps","useConfigProvider","hasCustomPanelHeaderAfter","customPanelHeaderAfterMinWidth","isInsideModal","React","useContext","ModalRootContext","platform","usePlatform","afterSlotProps","style","minWidth","typographyNode","isValidElement","type","displayName","LegacyPanelHeaderContent","Platform","VKCOM","Text","weight","className","Fragment","TooltipContainer","fixed","div","Separator","wide","visor","transparent","shadow","getRef","getRootRef","useAdaptivity","sizeX","useAdaptivityConditionalRender","adaptiveSizeX","isFixed","undefined","RootComponent","baseClassName","hasOwnProperty","SizeType","COMPACT","FixedLayout","vertical","compact","Spacing","size","Content"],"mappings":"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"}